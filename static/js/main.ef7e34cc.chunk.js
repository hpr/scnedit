(this.webpackJsonpscnedit=this.webpackJsonpscnedit||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(6),l=n.n(a),i=(n(15),n(7)),u=n(10),s=n(2),o=(n(16),n(8)),j=n.n(o),b=n(9),d=n(0);var h=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(20),l=Object(s.a)(a,2),o=l[0],h=l[1],f=Object(r.useState)(20),O=Object(s.a)(f,2),y=O[0],p=O[1],v=Object(r.useState)([]),x=Object(s.a)(v,2),g=x[0],m=x[1],I=Object(r.useState)(0),w=Object(s.a)(I,2),A=w[0],S=w[1],C=Object(r.useState)(1),k=Object(s.a)(C,2),E=k[0],N=k[1],U=Object(r.useState)(!1),z=Object(s.a)(U,2),B=z[0],F=z[1],D=Object(r.useState)("0,-1,-1"),M=Object(s.a)(D,2),V=M[0],Z=M[1],J=Object(r.useState)(""),L=Object(s.a)(J,2),P=L[0],R=L[1],T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;try{var t=0,r=new DataView(e.buffer),c=Array(E).fill().map((function(e){var n=r.getUint32(t,!1);return t+=4,{size:n}}));c.forEach((function(e){var n=t+e.size;for(e.layerId=r.getUint32(t,!1),e.layerZ=r.getUint32(t+4,!1),t+=8,console.groupCollapsed("layer ".concat(e.layerId," (sz ").concat(e.size,", z ").concat(e.layerZ,"):")),e.tiles=[];t<n;t+=8){var c,a=r.getInt16(t,!1),l=r.getInt16(t+2,!1),i=r.getInt16(t+4,!1),s=r.getInt16(t+6,!1);console.log({autotileIdx:a,tilesetId:l,tileId:i,numTiles:s});var o="#"+j()("".concat(a,",").concat(l,",").concat(i)).toString(16).slice(0,4);(c=e.tiles).push.apply(c,Object(u.a)(Array(s).fill({autotileIdx:a,tilesetId:l,tileId:i,color:o})))}console.groupEnd()})),m(c)}catch(a){alert("".concat(a," (try a different number of layers?)")),console.groupEnd()}},q=g[A]||{},G=q.tiles?Math.ceil(q.tiles.length/y):0;return Object(d.jsx)("div",{className:"App",children:Object(d.jsxs)("header",{className:"App-header",children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("input",{type:"file",accept:".scn",onChange:function(e){var t=new FileReader,n=e.target.files[0];t.onload=function(){var e=new Uint8Array(t.result);c(e),R(n.name),T(e)},t.readAsArrayBuffer(n)}}),Object(d.jsx)("button",{onClick:function(){return function(){var e,t=[],n=[],r=Object(i.a)(g);try{var c=function(){var r=e.value,c=new DataView(new ArrayBuffer(8));c.setUint32(0,r.layerId,!1),c.setUint32(4,r.layerZ,!1);var a=r.tiles.reduce((function(e,t){var n=e[e.length-4],r=e[e.length-3],c=e[e.length-2];return n===t.autotileIdx&&r===t.tilesetId&&c===t.tileId?e[e.length-1]++:e.push(t.autotileIdx,t.tilesetId,t.tileId,1),e}),[]),l=2*a.length+8,i=new DataView(new ArrayBuffer(2*a.length));a.forEach((function(e,t){return i.setInt16(2*t,e,!1)})),t.push(c,i),n.push(l)};for(r.s();!(e=r.n()).done;)c()}catch(u){r.e(u)}finally{r.f()}var a=new DataView(new ArrayBuffer(4*n.length));n.forEach((function(e,t){return a.setUint32(4*t,e,!1)}));var l=new Blob([a].concat(t));Object(b.saveAs)(l,P)}()},children:"Export changes"})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"numLayers",children:"Number of layers: "}),Object(d.jsx)("input",{type:"number",name:"numLayers",value:E,onChange:function(e){return N(Number(e.target.value))}}),Object(d.jsx)("button",{onClick:function(){return T()},children:"Re-calculate layers"})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"cols",children:"Columns: "}),Object(d.jsx)("input",{type:"number",name:"cols",value:o,onChange:function(e){return h(Number(e.target.value))}}),Object(d.jsx)("button",{onClick:function(){return p(Number(o))},children:"Set columns"})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"layer",children:"Selected layer: "}),Object(d.jsx)("select",{name:"layer",value:A,onChange:function(e){return S(Number(e.target.value))},children:g.map((function(e,t){return Object(d.jsxs)("option",{value:t,children:[e.layerId," (z = ",e.layerZ,")"]},t)}))})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"paintMode",children:"Paint mode: "}),Object(d.jsx)("input",{type:"checkbox",name:"paintMode",value:B,onChange:function(){return F(!B)}})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{htmlFor:"bucket",children:"Paint with: "}),Object(d.jsx)("input",{type:"text",name:"bucket",value:V,onChange:function(e){return Z(e.target.value)}})]}),Object(d.jsx)("table",{children:Object(d.jsx)("tbody",{children:y?Array(G).fill().map((function(e,t){return Object(d.jsx)("tr",{children:Array(y).fill().map((function(e,n){return function(e,t){return e?Object(d.jsxs)("td",{style:{background:e.color},children:[e.autotileIdx,",",e.tilesetId,",",e.tileId]},t):Object(d.jsx)("td",{},t)}(q.tiles[t*y+n],n)}))},t)})):null})})]})})};l.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(h,{})}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.ef7e34cc.chunk.js.map