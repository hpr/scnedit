(this.webpackJsonpscnedit=this.webpackJsonpscnedit||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(8),l=n.n(r),i=(n(16),n(6)),o=n(9),u=n(5),s=n(2),j=(n(17),n(10)),b=n.n(j),d=n(11),h=n(0);var O=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(20),l=Object(s.a)(r,2),j=l[0],O=l[1],f=Object(c.useState)(20),x=Object(s.a)(f,2),v=x[0],p=x[1],y=Object(c.useState)([]),m=Object(s.a)(y,2),g=m[0],I=m[1],w=Object(c.useState)(0),C=Object(s.a)(w,2),S=C[0],A=C[1],k=Object(c.useState)(1),N=Object(s.a)(k,2),E=N[0],F=N[1],U=Object(c.useState)(!1),z=Object(s.a)(U,2),B=z[0],D=z[1],M=Object(c.useState)("0,-1,-1"),V=Object(s.a)(M,2),Z=V[0],T=V[1],J=Object(c.useState)(""),L=Object(s.a)(J,2),P=L[0],R=L[1],q=Object(c.useState)(!1),G=Object(s.a)(q,2),H=G[0],K=G[1],Q=function(e,t,n){return"#"+b()("".concat(e,",").concat(t,",").concat(n)).toString(16).slice(0,4)},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;try{var t=0,c=new DataView(e.buffer),a=Array(E).fill().map((function(e){var n=c.getUint32(t,!1);return t+=4,{size:n}}));a.forEach((function(e){var n=t+e.size;for(e.layerId=c.getUint32(t,!1),e.layerZ=c.getUint32(t+4,!1),t+=8,console.groupCollapsed("layer ".concat(e.layerId," (sz ").concat(e.size,", z ").concat(e.layerZ,"):")),e.tiles=[];t<n;t+=8){var a,r=c.getInt16(t,!1),l=c.getInt16(t+2,!1),i=c.getInt16(t+4,!1),o=c.getInt16(t+6,!1);console.log({autotileIdx:r,tilesetId:l,tileId:i,numTiles:o});var s=Q(r,l,i);(a=e.tiles).push.apply(a,Object(u.a)(Array(o).fill({autotileIdx:r,tilesetId:l,tileId:i,color:s})))}console.groupEnd()})),I(a)}catch(r){alert("".concat(r," (try a different number of layers?)")),console.groupEnd()}},X={height:H?0:"2em",width:H?"auto":"2em"},Y=g[S]||{},$=Y.tiles?Math.ceil(Y.tiles.length/v):0;return Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)("header",{className:"App-header",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{type:"file",accept:".scn",onChange:function(e){var t=new FileReader,n=e.target.files[0];t.onload=function(){var e=new Uint8Array(t.result);a(e),R(n.name),W(e)},t.readAsArrayBuffer(n)}}),Object(h.jsx)("button",{onClick:function(){return function(){var e,t=[],n=[],c=Object(o.a)(g);try{var a=function(){var c=e.value,a=new DataView(new ArrayBuffer(8));a.setUint32(0,c.layerId,!1),a.setUint32(4,c.layerZ,!1);var r=c.tiles.reduce((function(e,t){var n=e[e.length-4],c=e[e.length-3],a=e[e.length-2];return n===t.autotileIdx&&c===t.tilesetId&&a===t.tileId?e[e.length-1]++:e.push(t.autotileIdx,t.tilesetId,t.tileId,1),e}),[]),l=2*r.length+8,i=new DataView(new ArrayBuffer(2*r.length));r.forEach((function(e,t){return i.setInt16(2*t,e,!1)})),t.push(a,i),n.push(l)};for(c.s();!(e=c.n()).done;)a()}catch(i){c.e(i)}finally{c.f()}var r=new DataView(new ArrayBuffer(4*n.length));n.forEach((function(e,t){return r.setUint32(4*t,e,!1)}));var l=new Blob([r].concat(t));Object(d.saveAs)(l,P)}()},children:"Export changes"})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"numLayers",children:"Number of layers: "}),Object(h.jsx)("input",{type:"number",name:"numLayers",value:E,onChange:function(e){return F(Number(e.target.value))}}),Object(h.jsx)("button",{onClick:function(){return W()},children:"Re-calculate layers"})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"cols",children:"Columns: "}),Object(h.jsx)("input",{type:"number",name:"cols",value:j,onChange:function(e){return O(Number(e.target.value))}}),Object(h.jsx)("button",{onClick:function(){return p(Number(j))},children:"Set columns"})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"layer",children:"Selected layer: "}),Object(h.jsx)("select",{name:"layer",value:S,onChange:function(e){return A(Number(e.target.value))},children:g.map((function(e,t){return Object(h.jsxs)("option",{value:t,children:[e.layerId," (z = ",e.layerZ,")"]},t)}))})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"showCellText",children:"Show cell text? "}),Object(h.jsx)("input",{type:"checkbox",name:"showCellText",value:H,onChange:function(){return K(!H)}}),Object(h.jsx)("label",{htmlFor:"paintMode",children:"Paint mode: "}),Object(h.jsx)("input",{type:"checkbox",name:"paintMode",value:B,onChange:function(){return D(!B)}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"bucket",children:"Paint with: "}),Object(h.jsx)("input",{type:"text",name:"bucket",value:Z,onChange:function(e){return T(e.target.value)}})]}),Object(h.jsx)("table",{onClick:function(e){var t=Number(e.target.getAttribute("name"));if(B){var n=Z.split(","),c=Object(s.a)(n,3),a=c[0],r=c[1],l=c[2],o=Q(a,r,l),j=Object(u.a)(g),b=Object(i.a)({},g[S]),d=Object(u.a)(b.tiles);j[S]=b,b.tiles=d,d[t]={autotileIdx:a,tilesetId:r,tileId:l,color:o},I(j)}else{var h=g[S].tiles[t];T("".concat(h.autotileIdx,",").concat(h.tilesetId,",").concat(h.tileId))}},children:Object(h.jsx)("tbody",{children:v?Array($).fill().map((function(e,t){return Object(h.jsx)("tr",{children:Array(v).fill().map((function(e,n){return function(e,t,n){return e?Object(h.jsx)("td",{name:n,style:Object(i.a)(Object(i.a)({},X),{},{background:e.color}),children:H&&"".concat(e.autotileIdx,",").concat(e.tilesetId,",").concat(e.tileId)},t):Object(h.jsx)("td",{style:X},t)}(Y.tiles[t*v+n],n,t*v+n)}))},t)})):null})})]})})};l.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(O,{})}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.1c240a19.chunk.js.map